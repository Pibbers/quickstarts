<script src="{{uiRootPath}}/js/lang.js"></script>
<!-- Adding CDN to use sql-formatter for unpkg -->
<script src="https://unpkg.com/sql-formatter/dist/sql-formatter.min.js"></script>

<!-- Google Tag Manager (noscript) -->
<noscript>
  <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T7Q6CLV" height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->

<!-- Navbar -->
  {{#if (eq page.attributes.lang 'ja')}}
    {{> navbar-ja}}
  {{else}}
    {{> navbar-en}}
  {{/if}}
<!-- Navbar -->

  <script>
    var sectionElement = document.querySelector(".navbar-search");
    var devElement = document.querySelector(".dev");
    if (sectionElement.innerHTML.trim() === "") {
      devElement.style.marginRight = "-65px"; 
    }

    /* Script for desktop dropdowns */
    function community() {

      var blackoutElement = document.querySelector('.page-blackout');

      document.getElementById("myCommunityDropdown").classList.toggle("show");
      document.getElementById("myDocsDropdown").classList.remove("show");
      if(document.getElementById("myCommunityDropdown").classList.contains("dropdown-content") && 
          document.getElementById("myCommunityDropdown").classList.contains("show")){
        blackoutElement.classList.add('active');
      }else{
        blackoutElement.classList.remove('active');
      }
    }

    function docs() {
      var blackoutElement = document.querySelector('.page-blackout');   
   
      document.getElementById("myDocsDropdown").classList.toggle("show");
      document.getElementById("myCommunityDropdown").classList.remove("show"); 
      if(document.getElementById("myDocsDropdown").classList.contains("dropdown-content") && 
          document.getElementById("myDocsDropdown").classList.contains("show")){
        blackoutElement.classList.add('active');
      }else{
        blackoutElement.classList.remove('active');
      }
    }

  // Close the dropdown if the user clicks outside of it
  window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      var blackoutElement = document.querySelector('.page-blackout');
      var i;
      for (i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains('show')) {
          openDropdown.classList.remove('show');
          blackoutElement.classList.remove('active');
        }
      }
      
    }
  }
  /* Script for desktop dropdowns */

  /* Mobile NavBar */
  document.addEventListener("DOMContentLoaded", function () {
  const showMenuButton = document.getElementById("showMenu");
  const menuListing = document.querySelector(".header-nav-mobile__menu-listing");
  const menu = document.getElementById('vue-mobile-slide');
  const blackoutElement = document.querySelector('.page-blackout');

  showMenuButton.addEventListener("click", function () {
    menuListing.classList.toggle("display-menu"); 
    showMenuButton.classList.toggle("active"); 
    blackoutElement.classList.toggle("active");
  });


// sqlFormattingOptions based on sql-formatting configuration
// https://github.com/sql-formatter-org/sql-formatter


const sqlFormatterOptions = {
    tabWidth: 2,
    keywordCase: 'upper',
    functionCase: 'upper',
    linesBetweenQueries: 1,
};


// Select all elements with the class "language-teradata-sql"
const sqlCodeElements = document.querySelectorAll('.language-teradata-sql');

// Iterate through each SQL code element. 
sqlCodeElements.forEach(sqlCodeElement => {
  // Check if the element has already been formatted
  if (!sqlCodeElement.classList.contains('formatted')) {
      const sqlCode = sqlCodeElement.innerText;
      // Format SQL code with custom options
      const formattedSql = sqlFormatter.format(sqlCode, sqlFormatterOptions)

      sqlCodeElement.innerHTML = formattedSql;

      // Mark the element as formatted to avoid duplication
      sqlCodeElement.classList.add('formatted');
  } else {
      console.log('Element with class "language-teradata-sql" already formatted.');
  }
});

});


  document.addEventListener("DOMContentLoaded", function () {
  const toggleButtonDocs = document.getElementById("toggleButtonDocs");
  const containerDocs = document.querySelector(".slide-up-down__container");

  toggleButtonDocs.addEventListener("click", function () {
    containerDocs.classList.toggle("hidden");
    toggleButtonDocs.classList.toggle("toggle-active");
  });
});
 
document.addEventListener("DOMContentLoaded", function () {
  const toggleButtonComm = document.getElementById("toggleButtonComm");
  const containerComm = document.querySelectorAll(".slide-up-down__container")[1];

  toggleButtonComm.addEventListener("click", function () {
    containerComm.classList.toggle("hidden");
    toggleButtonComm.classList.toggle("toggle-active");
  });
});
  </script>
<style>
  .active-lan{
    color: #ff5f02;
    font-weight: 600;
  }
  .dropdown1 {
    position: relative;
    display: inline-block;
  }
  .td-language-selector {
    position: relative;
    padding: 6px 0;
  }
    .td-language-selector__toggle {
    color: inherit;
    align-items: center;
    position: relative;
    width: auto;
    padding: 0 1.2rem;
    display: flex;
    z-index: 1;
    transition: .25s;
  }
  .td-language-selector ul {
    background: #f6f7fb;
    border-radius: 2px;
    box-shadow: 0 4px 4px rgba(0,0,0,.25);
    color: #333a3e;
    position: absolute;
    top: 150%;
    right: 0;
    padding: 28px 32px;
    overflow: auto;
    opacity: 0;
    visibility: hidden;
    transition: all .25s ease;
  }
  .dropdown-content1 {
    display: none;
    position: absolute;
    background: #f6f7fb;
    min-width: 124px; 
    overflow: auto;
    box-shadow: 0 4px 4px rgba(0,0,0,.25);
    z-index: 1;
    top: 150%;
    right: 0;
    padding: 28px 32px;
    transition: all .25s ease;
  }
  .show {display: block;}

  .me-4 {
    margin-right: 1rem!important;
  }
</style>